<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Area Arithmetic Calculator</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<style>
  body {
    font-family: 'Roboto', Arial, sans-serif;
    margin: 0;
    background-color: #f0f2f5;
    color: #333;
    padding: 30px 0;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .header-bar {
    background-color: #007bff;
    color: white;
    padding: 15px 20px;
    width: 100%;
    text-align: center;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    margin-bottom: 30px;
    box-sizing: border-box;
  }
  .header-bar h1 {
    margin: 0;
    font-size: 1.8em;
  }

  .container {
    max-width: 900px;
    width: 100%;
    margin: 0 auto;
    padding: 0 20px;
    box-sizing: border-box;
  }

  .calculator-section {
    background-color: white;
    border: 1px solid #e0e0e0;
    padding: 25px;
    margin-bottom: 25px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    position: relative;
  }

  h2 {
    color: #0056b3;
    border-bottom: 2px solid #007bff;
    padding-bottom: 8px;
    margin-top: 0;
    margin-bottom: 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  h2 .remove-btn {
    background-color: #dc3545;
    color: white;
    border: none;
    border-radius: 4px;
    padding: 5px 10px;
    font-size: 0.8em;
    cursor: pointer;
    transition: background-color 0.2s ease;
  }
  h2 .remove-btn:hover {
    background-color: #c82333;
  }

  .input-group {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
  }
  .input-group label {
    flex: 0 0 100px;
    margin-right: 15px;
    font-weight: bold;
    color: #555;
    text-align: right;
  }
  .input-group input[type="number"] {
    flex: 1;
    padding: 8px;
    border: 1px solid #ced4da;
    border-radius: 4px;
    box-sizing: border-box;
    max-width: 150px;
  }
  .input-group span {
    flex: 0 0 60px;
    text-align: left;
    font-weight: bold;
    color: #666;
    margin-left: 10px;
  }

  .result-output {
    font-weight: bold;
    margin-top: 15px;
    padding: 12px;
    background-color: #e2f0fb;
    border: 1px solid #b3d9ff;
    border-radius: 5px;
    text-align: center;
    color: #0056b3;
    min-height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    word-break: break-word;
    flex-direction: column;
  }
  .result-output span {
      display: block;
      margin: 2px 0;
  }

  .button-group {
    text-align: center;
    margin-top: 25px;
    display: flex;
    justify-content: center;
    gap: 15px;
    flex-wrap: wrap;
    margin-bottom: 25px;
  }
  button {
    padding: 10px 20px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1em;
    transition: background-color 0.2s ease;
  }
  button:hover {
    background-color: #0056b3;
  }
  button:active {
    background-color: #004085;
  }
  button.add-btn {
    background-color: #28a745;
  }
  button.add-btn:hover {
    background-color: #218838;
  }
  button.clear-all-btn {
    background-color: #6c757d;
  }
  button.clear-all-btn:hover {
    background-color: #5a6268;
  }

  .custom-calculation-section {
    background-color: white;
    border: 1px solid #e0e0e0;
    padding: 25px;
    margin-bottom: 25px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }

  .custom-calculation-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    gap: 10px;
  }
  .custom-calculation-item select {
    width: auto;
    padding: 8px;
    border-radius: 4px;
    border: 1px solid #ced4da;
    font-weight: bold;
    flex-shrink: 0; /* Prevent shrinking */
  }
  .custom-calculation-item .area-label {
    font-weight: bold;
    flex-grow: 1; /* Take up remaining space */
  }

  .operation-results {
    margin-top: 30px;
    padding: 20px;
    background-color: #f8f9fa;
    border: 1px solid #dcdcdc;
    border-radius: 8px;
    box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
    display: none;
  }
  .operation-results h3 {
    color: #0056b3;
    margin-top: 0;
    margin-bottom: 15px;
    text-align: center;
  }
  .operation-results p {
    font-size: 1.1em;
    margin-bottom: 8px;
    color: #343a40;
  }
  .operation-results p strong {
    color: #007bff;
  }

  /* Responsive adjustments */
  @media (max-width: 600px) {
    .input-group {
      flex-direction: column;
      align-items: flex-start;
    }
    .input-group label {
      text-align: left;
      margin-bottom: 5px;
      flex: none;
    }
    .input-group input[type="number"] {
      max-width: 100%;
      width: 100%;
    }
    .input-group span {
      margin-left: 0;
      margin-top: 5px;
    }
    .button-group {
      flex-direction: column;
      gap: 10px;
    }
    .custom-calculation-item {
      flex-direction: column;
      align-items: flex-start;
    }
  }
</style>
</head>
<body>

<div class="logo-container">
  
</div>
<div class="header-bar">
    <h1> Arithmetic Area Calculator</h1>
</div>

<div class="container">

    <div id="measurementsContainer">
        </div>

    <div class="button-group">
        <button class="add-btn" onclick="addMeasurement()">Add New Area Measurement</button>
        <button class="clear-all-btn" onclick="clearAllMeasurements()">Clear All</button>
    </div>

    <div class="calculator-section custom-calculation-section">
        <h2>Custom Calculation</h2>
        <div id="customCalculationInputs">
            <p style="text-align: center; color: #777;">Add areas above to start a custom calculation.</p>
        </div>
        <div style="text-align: center; margin-top: 20px;">
            <button onclick="calculateCustomExpression()">Calculate Custom Expression</button>
        </div>
    </div>

    <div class="calculator-section operation-results" id="customOperationResults">
        <h3>Custom Calculation Result</h3>
        <p>Total (Sq.Ft.): <strong id="customResultSqFt">0.00</strong></p>
        <p>In Traditional Units: <strong id="customResultTraditional">0 Bigha, 0 Katha, 0 Chattak, 0.00 Sq.Ft.</strong></p>
    </div>

</div> <script>
  // Constants for conversion (specific to Bengal/Bihar)
  const SQFT_PER_CHATTAK = 45;
  const CHATTAK_PER_KATHA = 16;
  const KATHA_PER_BIGHA = 20;
  const SQFT_PER_KATHA = CHATTAK_PER_KATHA * SQFT_PER_CHATTAK; // 16 chattak * 45 sqft/chattak = 720 sqft
  const SQFT_PER_BIGHA = KATHA_PER_BIGHA * SQFT_PER_KATHA; // 20 katha * 720 sqft/katha = 14400 sqft

  let measurementCount = 0;
  const measurementsData = {}; // Stores { id: totalSqFt } for each measurement
  const measurementOrder = []; // Stores order of IDs to maintain display order

  const measurementsContainer = document.getElementById('measurementsContainer');
  const customCalculationInputsContainer = document.getElementById('customCalculationInputs');
  const customOperationResultsDiv = document.getElementById('customOperationResults');

  // Function to convert Bigha, Katha, Chattak, Sq.Ft. to total Sq.Ft.
  function toSqFt(bigha, katha, chattak, sqft) {
    return (bigha * SQFT_PER_BIGHA) +
           (katha * SQFT_PER_KATHA) +
           (chattak * SQFT_PER_CHATTAK) +
           sqft;
  }

  // Function to convert total Sq.Ft. back to Bigha, Katha, Chattak, Sq.Ft.
  function toTraditionalUnits(totalSqFt) {
    let remainingSqFt = Math.abs(totalSqFt); // Use absolute value for conversion

    const bigha = Math.floor(remainingSqFt / SQFT_PER_BIGHA);
    remainingSqFt %= SQFT_PER_BIGHA;

    const katha = Math.floor(remainingSqFt / SQFT_PER_KATHA);
    remainingSqFt %= SQFT_PER_KATHA;

    const chattak = Math.floor(remainingSqFt / SQFT_PER_CHATTAK);
    remainingSqFt %= SQFT_PER_CHATTAK;

    const sqft = remainingSqFt; // Remaining is in Sq.Ft.

    return {
      bigha: bigha,
      katha: katha,
      chattak: chattak,
      sqft: sqft.toFixed(2)
    };
  }

  // Add a new measurement input block
  function addMeasurement() {
    measurementCount++;
    const id = `Area${measurementCount}`;
    measurementOrder.push(id); // Add to order array

    const section = document.createElement('div');
    section.className = 'calculator-section';
    section.id = `measurement-${id}`;

    section.innerHTML = `
      <h2>${id}
        <button class="remove-btn" onclick="removeMeasurement('${id}')">Remove</button>
      </h2>
      <div class="input-group">
          <label for="${id}Bigha">Bigha:</label>
          <input type="number" id="${id}Bigha" value="0" min="0" oninput="calculateIndividualMeasurement('${id}')" />
          <span>Bigha</span>
      </div>
      <div class="input-group">
          <label for="${id}Katha">Katha:</label>
          <input type="number" id="${id}Katha" value="0" min="0" oninput="calculateIndividualMeasurement('${id}')" />
          <span>Katha</span>
      </div>
      <div class="input-group">
          <label for="${id}Chattak">Chattak:</label>
          <input type="number" id="${id}Chattak" value="0" min="0" oninput="calculateIndividualMeasurement('${id}')" />
          <span>Chattak</span>
      </div>
      <div class="input-group">
          <label for="${id}SqFt">Sq.Ft.:</label>
          <input type="number" id="${id}SqFt" value="0" min="0" oninput="calculateIndividualMeasurement('${id}')" />
          <span>Sq.Ft.</span>
      </div>
      <div class="result-output" id="${id}ResultSqFt"><span>Total ${id}: 0.00 Sq.Ft.</span></div>
      <div class="result-output" id="${id}ResultTraditional"><span>${id} in Traditional: 0 Bigha, 0 Katha, 0 Chattak, 0.00 Sq.Ft.</span></div>
    `;

    measurementsContainer.appendChild(section);
    calculateIndividualMeasurement(id); // Initialize its value
    updateCustomCalculationUI(); // Update custom calculation section
  }

  // Remove a measurement input block
  function removeMeasurement(idToRemove) {
    const sectionToRemove = document.getElementById(`measurement-${idToRemove}`);
    if (sectionToRemove) {
      sectionToRemove.remove();
      delete measurementsData[idToRemove]; // Remove from stored data
      const index = measurementOrder.indexOf(idToRemove);
      if (index > -1) {
        measurementOrder.splice(index, 1); // Remove from order array
      }
      updateCustomCalculationUI(); // Update custom calculation section
      calculateCustomExpression(); // Recalculate custom expression
    }
  }

  // Calculate and display total Sq.Ft. and traditional units for an individual measurement
  function calculateIndividualMeasurement(id) {
    const bigha = parseFloat(document.getElementById(`${id}Bigha`).value) || 0;
    const katha = parseFloat(document.getElementById(`${id}Katha`).value) || 0;
    const chattak = parseFloat(document.getElementById(`${id}Chattak`).value) || 0;
    const sqft = parseFloat(document.getElementById(`${id}SqFt`).value) || 0;

    let totalSqFt = toSqFt(bigha, katha, chattak, sqft);
    measurementsData[id] = totalSqFt; // Store the calculated value

    const traditional = toTraditionalUnits(totalSqFt);

    document.getElementById(`${id}ResultSqFt`).innerHTML = `<span>Total ${id}: ${totalSqFt.toFixed(2)} Sq.Ft.</span>`;
    document.getElementById(`${id}ResultTraditional`).innerHTML = `<span>${id} in Traditional: ${traditional.bigha} Bigha, ${traditional.katha} Katha, ${traditional.chattak} Chattak, ${traditional.sqft} Sq.Ft.</span>`;

    calculateCustomExpression(); // Trigger recalculation of custom expression
  }

  // Update the UI for custom calculations (add/remove selects)
  function updateCustomCalculationUI() {
    customCalculationInputsContainer.innerHTML = '';
    if (measurementOrder.length === 0) {
      customCalculationInputsContainer.innerHTML = '<p style="text-align: center; color: #777;">Add areas above to start a custom calculation.</p>';
      customOperationResultsDiv.style.display = 'none';
      return;
    }

    measurementOrder.forEach((id, index) => {
      const itemDiv = document.createElement('div');
      itemDiv.className = 'custom-calculation-item';

      const select = document.createElement('select');
      select.id = `op-${id}`;
      // For the first item, default to '+', otherwise default to '+'
      select.innerHTML = `
        <option value="+">${index === 0 ? "" : "+"} Add</option>
        <option value="-">- Subtract</option>
      `;
      if (index === 0) { // For the first item, hide the '+' sign as it's implied
        select.querySelector('option[value="+"]').textContent = "Include";
      }

      const label = document.createElement('span');
      label.className = 'area-label';
      label.textContent = id;

      itemDiv.appendChild(select);
      itemDiv.appendChild(label);
      customCalculationInputsContainer.appendChild(itemDiv);
    });
  }

  // Calculate the custom expression based on selected operators
  function calculateCustomExpression() {
    let finalResultSqFt = 0;
    if (Object.keys(measurementsData).length === 0) {
      customOperationResultsDiv.style.display = 'none';
      return;
    }

    measurementOrder.forEach(id => {
      const operatorSelect = document.getElementById(`op-${id}`);
      if (operatorSelect) { // Check if the element exists (might be removed)
        const operator = operatorSelect.value;
        const value = measurementsData[id] || 0;

        if (operator === '+') {
          finalResultSqFt += value;
        } else if (operator === '-') {
          finalResultSqFt -= value;
        }
      }
    });

    const traditionalResult = toTraditionalUnits(finalResultSqFt);

    document.getElementById('customResultSqFt').textContent = finalResultSqFt.toFixed(2);
    // Display negative sign if result is negative
    if (finalResultSqFt < 0) {
      document.getElementById('customResultSqFt').textContent = `- ${Math.abs(finalResultSqFt).toFixed(2)}`;
      document.getElementById('customResultTraditional').textContent = `(Negative) ${traditionalResult.bigha} Bigha, ${traditionalResult.katha} Katha, ${traditionalResult.chattak} Chattak, ${traditionalResult.sqft} Sq.Ft.`;
    } else {
      document.getElementById('customResultTraditional').textContent = `${traditionalResult.bigha} Bigha, ${traditionalResult.katha} Katha, ${traditionalResult.chattak} Chattak, ${traditionalResult.sqft} Sq.Ft.`;
    }

    customOperationResultsDiv.style.display = 'block';
  }

  // Clear all measurements and reset
  function clearAllMeasurements() {
    measurementsContainer.innerHTML = '';
    measurementCount = 0;
    for (const key in measurementsData) {
      delete measurementsData[key];
    }
    measurementOrder.length = 0; // Clear the order array
    updateCustomCalculationUI(); // Reset custom calculation UI
    calculateCustomExpression(); // Hide results
  }

  // Initialize with one measurement section on load for immediate use
  document.addEventListener('DOMContentLoaded', () => {
    addMeasurement();
  });
</script>

</body>
</html>